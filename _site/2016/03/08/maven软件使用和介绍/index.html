<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>maven &mdash; ssgao</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mzlogin/rouge-themes@master/dist/github.css"><link rel="canonical" href="http://localhost:4000/2016/03/08/maven%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8%E5%92%8C%E4%BB%8B%E7%BB%8D/"><link rel="alternate" type="application/atom+xml" title="ssgao" href="http://localhost:4000/feed.xml"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/favicon.ico"><meta property="og:title" content="maven"><meta name="keywords" content="maven"><meta name="og:keywords" content="maven"><meta name="description" content="​"><meta name="og:description" content="​"><meta property="og:url" content="http://localhost:4000/2016/03/08/maven%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8%E5%92%8C%E4%BB%8B%E7%BB%8D/"><meta property="og:site_name" content="ssgao"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2016-03-08"> <script src="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="http://localhost:4000/" title="ssgao"><span class="octicon octicon-mark-github"></span> ssgao</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="http://localhost:4000/" class=" site-header-nav-item" target="" title="首页">首页</a> <a href="http://localhost:4000/categories/" class=" site-header-nav-item" target="" title="分类">分类</a> <a href="http://localhost:4000/links/" class=" site-header-nav-item" target="" title="链接">链接</a> <a href="http://localhost:4000/about/" class=" site-header-nav-item" target="" title="关于">关于</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="maven"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">maven</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2016/03/08 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="http://localhost:4000/categories/#maven" title="maven">maven</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 29911 字，约 86 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"> <img style="height:72px;width:72px" src="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/images/qrcode.jpg" alt="ssgao断点" /></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><meta name="referrer" content="no-referrer" /><p>​</p><h2 id="maven">maven</h2><h4 id="settingxml">setting.xml</h4><h5 id="localrepository">localRepository</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localRepository : 表示本地库的保存位置，也就是maven主要的jar包保存位置，默认在${user.dir}/.m2/repository，如果需要另外设置，就换成其他的路径

如指定f盘的文件夹下：
<span class="nt">&lt;localRepository&gt;</span>F:\maven\mavenresource<span class="nt">&lt;/localRepository&gt;</span>、

Servers 在POM中的distributionManagement元素定义了开发库。然而，特定的username和pwd不能使用与pom.xml
所以通过此配置来保存server信息
    id:server的id,用于匹配distributionManagement库id
    username,password 用于登录此服务器的用户名和密码
    privateKey,passphrase：设置private key 以及passphrase
    filePermissions,directoryPermissions：当库文件或者目录创建后，需要使用权限进行访问
</code></pre></div></div><h5 id="mirrors"><strong>mirrors</strong></h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Mirrors 表示镜像库，指定库的镜像，用于增加其他库
    id, name 唯一的标志，用于区别镜像
    url 镜像的url
    mirrorOf 此镜像指向的服务id
mirror相当于一个拦截器，它会拦截maven对remote repository的相关请求，把请求的remote repository地址，重定向到mirror里配置的地址

<span class="nt">&lt;mirrors&gt;</span>
    <span class="nt">&lt;mirror&gt;</span>
      <span class="nt">&lt;id&gt;</span>maven.net.cn<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>one of the central mirrors in china<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://maven.net.cn/content/groups/public/<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;mirrorOf&gt;</span>central<span class="nt">&lt;/mirrorOf&gt;</span>
    <span class="nt">&lt;/mirror&gt;</span>
  <span class="nt">&lt;/mirrors&gt;</span>

例如：<span class="nt">&lt;mirrorOf&gt;</span>的值为central，表示该配置为中央仓库的镜像，任何对于中央仓库的请求都会转至该镜像，用户也可以使用同样的方法配置其他仓库的镜像。
  另外三个元素id,name,url与一般仓库配置无异，表示该镜像仓库的唯一标识符、名称以及地址。类似地，如果该镜像需认证，也可以基于该id配置仓库认证。
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mirrors&gt;</span>
    <span class="nt">&lt;mirror&gt;</span>
      <span class="nt">&lt;id&gt;</span>internal-repository<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>Internal Repository Manager<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://192.168.1.100/maven2<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;mirrorOf&gt;</span>*<span class="nt">&lt;/mirrorOf&gt;</span>
    <span class="nt">&lt;/mirror&gt;</span>
<span class="nt">&lt;/mirrors&gt;</span>
该实例中：
<span class="nt">&lt;mirrorOf&gt;</span>的值为星号，表示该配置是所有Maven仓库的镜像，任何对于远程仓库的请求都会被转移到 http://192.168.1.100/maven2/.


<span class="nt">&lt;mirrorOf&gt;</span>*<span class="nt">&lt;/mirrorOf&gt;</span> 匹配所有远程仓库
<span class="nt">&lt;mirrorOf&gt;</span>external:*<span class="nt">&lt;/mirrorOf&gt;</span>匹配所有远程仓库，使用localhost的除外，使用file://协议的除外
<span class="nt">&lt;mirrorOf&gt;</span>repo1,repo2<span class="nt">&lt;/mirrorOf&gt;</span> 匹配仓库repo1,repo2，使用逗号分隔多个远程仓库
<span class="nt">&lt;mirrorOf&gt;</span>*,!repo1<span class="nt">&lt;/mirrorOf&gt;</span> 匹配所有远程仓库，repo1除外，使用感叹号将仓库从匹配中排除。
</code></pre></div></div><p>​</p><h4 id="maven-仓库设置">maven 仓库设置</h4><h5 id="本地资源库">本地资源库</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MAVEN的本地资源库是用来存储所有项目的依赖关系（插件和其他文件，这个文件被MAVEN 下载到本地文件中。）
可以通过修改MAVEN安装目录下conf/setting.xml配置文件中的<span class="nt">&lt;localRepository&gt;</span>标签来设置对应的仓库目录
如下：我把仓库位置修改为 F盘的目录下
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636439917584-4df7d7f3-2455-4da9-8f9d-916ffcea3b45.png#clientId=u85a961f6-7950-4&amp;from=paste&amp;height=137&amp;id=udfeeb269&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=274&amp;originWidth=1406&amp;originalType=binary&amp;ratio=1&amp;size=214441&amp;status=done&amp;style=none&amp;taskId=u1cbc58e8-2124-427f-876e-6e866da3280&amp;width=703" alt="image.png" /></p><h5 id="中央仓库">中央仓库</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    当我们建立一个Maven的项目，Maven会检查你的pom.xml文件，以确定哪些依赖需要下载。
首先Maven将从本地资源库获得Maven的本地资源库依赖资源，如果没有找到，然后它会从默认的Maven中央存储库-
http://repo1.maven.org/maven2/查找下载
默认的位置 在MAVEN的安装目录/lib/maven-model-builder-3.0.5的jar包下
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636439953719-ee1e7f45-84be-4f1f-9cd6-e3fc1878f8c3.png#clientId=u85a961f6-7950-4&amp;from=paste&amp;height=588&amp;id=uae54c90c&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=1176&amp;originWidth=1616&amp;originalType=binary&amp;ratio=1&amp;size=1316066&amp;status=done&amp;style=none&amp;taskId=u5385e2c7-1a54-40b7-b582-4463f61aa97&amp;width=808" alt="image.png" /></p><h5 id="远程仓库">远程仓库</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MAVEN 中，当声明的库不存在本地存储库中，也没有存在Maven的中心仓库中，依赖过程将停止，并将错误信息输出到Maven控制台。
Downloading in Maven is triggered by a project declaring a dependency that is not present in the local repository
(or for a SNAPSHOT, when the remote repository contains one that is newer).
By default, Maven will download from the central repository.
例如：org.jvnet.localizer只适用于java.net资源库
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636494239509-d6a98bbe-eae5-49c7-842c-333190c8e238.png#clientId=ua7e09150-4cf3-4&amp;from=paste&amp;height=247&amp;id=ue9f3155f&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=494&amp;originWidth=1622&amp;originalType=binary&amp;ratio=1&amp;size=405030&amp;status=done&amp;style=none&amp;taskId=u51d0ff85-b760-4c66-988f-e9f658b6e15&amp;width=811" alt="image.png" /></p><h5 id="maven-的存储路径">maven 的存储路径</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>解读Maven在仓库中的存储路径：
1.基于groupId准备路径，将句点分隔符转成路径分隔符，就是将  "."  转换成 "/" ; example： org.testng ---&gt;org/testng
2.基于artifactId准备路径，将artifactId连接到后面：org/testng/testng
3.使用version准备路径，将version连接到后面：org/testng/testng/5.8
4.将artifactId于version以分隔符连字号连接到后面：org/testng/testng/5.8/tesng-5.8
5.判断如果构件有classifier，就要在 第4项 后增加 分隔符连字号 再加上 classifier，org/testng/testng/5.8/tesng-5.8-jdk5
6.检查构件的extension，如果extension存在，则加上句点分隔符和extension，而extension是由packing决定的，org/testng/testng/5.8/tesng-5.8-jdk5.jar
到这里我们就明白了Maven 对于构件存储的细节。
</code></pre></div></div><h5 id="maven-仓库的查找顺序">maven 仓库的查找顺序</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Maven的依赖库的查询顺序更改为如下：
1）在Maven本地资源库中搜索，如果没有，进入下一步
2）在Maven中央存储库中搜索，如果没有，进入下一步
3）在Java.net Maven声明的远程仓库中搜索 如果没有提示错误
</code></pre></div></div><h4 id="maven-的打包设置">maven 的打包设置</h4><h5 id="上传到本地仓库">上传到本地仓库</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn install:install-file -Dfile=上传jar的位置 -DgroupId=自定义 -DartifactId= 结构名称 -Dversion={version}版本号 -Dpackaging=jar
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636494352891-57911c12-7fe3-4d8f-9247-75ad33b94deb.png#clientId=ua7e09150-4cf3-4&amp;from=paste&amp;height=354&amp;id=u9aa79bc2&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=708&amp;originWidth=1602&amp;originalType=binary&amp;ratio=1&amp;size=723015&amp;status=done&amp;style=none&amp;taskId=u21942df6-75a5-4df2-87ff-bae7d67fcfe&amp;width=801" alt="image.png" /></p><h5 id="上传到远程仓库">上传到远程仓库</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>进入项目目录
cd /d f:\project\upload-repository
mvn deploy

使用mvn命令行上传到远程仓库
    mvn deploy:deploy-file
        -Dmaven.test.skip=true //跳过编译,测试
        -Dfile=F:\MyEclipse\upload-repository\upload-repository-0.0.1-SNAPSHOT.jar //jar包文件地址,绝对路径
        -DgroupId=com.dcf.core.demo //groupId pom坐标,自定义
        -DartifactId=upload-repository //artifactId --pom坐标,自定义
        -Dversion=0.0.1-SNAPSHOT //版本号
        -Durl=http://192.168.14.217:9091/nexus/content/repositories/snapshots/  //远程库服务器地址
        -Dpackaging=jar //打包方式
        -DrepositoryId=nexus-snapshots //远程库服务ID
    命名只有一行,每个参数以空格分开,pom文件会自动生成。

在pom.xml文件中配置发布到远程仓库
  如果想把项目发布到nexu中，需要在pom.xml中配置releases和snapshots版本发布的具体repository
  <span class="nt">&lt;distributionManagement&gt;</span>
    <span class="c">&lt;!-- 两个ID必须与setting.xml中的&lt;server&gt;&lt;id&gt;nexus-releases&lt;/id&gt;&lt;/server&gt;保持一致--&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
        <span class="nt">&lt;id&gt;</span>nexus-releases<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;name&gt;</span>Nexus Release Repository<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;url&gt;</span>http://localhost:8081/nexus/content/repositories/releases<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;snapshotRepository&gt;</span>
        <span class="nt">&lt;id&gt;</span>nexus-snapshots<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;name&gt;</span>Nexus Snapshot Repository<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;url&gt;</span>http://localhost:8081/nexus/content/repositories/snapshots<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/snapshotRepository&gt;</span>
<span class="nt">&lt;/distributionManagement&gt;</span>

给用户授权,让其有权发布
    不论那种发布到远程仓库的方式,都需要在/conf/setting.xml中配置需要远程上传库的地址,用户以及密码
    在maven的conf中的setting.xml文件中找到servers标签，添加相应的用户，进行授权，这里的id需要和pom.xml中的id一样
    <span class="nt">&lt;servers&gt;</span>
     <span class="nt">&lt;server&gt;</span>
         <span class="nt">&lt;id&gt;</span>nexus-releases<span class="nt">&lt;/id&gt;</span>
         <span class="nt">&lt;username&gt;</span>admin<span class="nt">&lt;/username&gt;</span>
         <span class="nt">&lt;password&gt;</span>admin123<span class="nt">&lt;/password&gt;</span>
     <span class="nt">&lt;/server&gt;</span>
     <span class="nt">&lt;server&gt;</span>
           <span class="nt">&lt;id&gt;</span>nexus-snapshots<span class="nt">&lt;/id&gt;</span>
           <span class="nt">&lt;username&gt;</span>admin<span class="nt">&lt;/username&gt;</span>
           <span class="nt">&lt;password&gt;</span>admin123<span class="nt">&lt;/password&gt;</span>
     <span class="nt">&lt;/server&gt;</span>
    <span class="nt">&lt;/servers&gt;</span>

这里配置的admin用于，因为admin是管理员用户，是由权限发布的
假如你配置的是deloy用户，需要给deploy用户授权

发布到nexus中
    使用CLI:mvn:deploy命令打不到本地maven仓库，发布成功，可以在nexus的repositories中的releases或snapshots中看到刚刚发布的项目。

</code></pre></div></div><h5 id="将外部-jar-打入本地-maven-仓库">将外部 jar 打入本地 maven 仓库</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmd 进入jar包所在的路径,执行如下命令
 mvn install:install-file -Dfile=cloud.jar -DgroupId=com.hope.cloud -DartifactId=cloud -Dversion=1.0 -Dpackaging=jar
 <span class="nt">&lt;dependency&gt;</span>
     <span class="nt">&lt;groupId&gt;</span>com.hope.clou<span class="nt">&lt;/groupId&gt;</span>
     <span class="nt">&lt;artifactId&gt;</span>cloud<span class="nt">&lt;/artifactId&gt;</span>
     <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div><h4 id="maven-基本命令">maven 基本命令</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn package：打包
 &gt; 生成了target目录
 &gt; 编译了代码
 &gt; 使用junit测试并生成报告
 &gt; 生成代码的jar文件
 &gt; 运行jar包： java -cp target\xxx(生成的jar).jar  main.App (Main 入口的类名)


mvn compile 编译
 &gt; 自动编译，并将编译好的文件放到target目录对应的包下

mvn clean 清空
 &gt; 删掉编译好的包，清空target目录

mvn test :运行测试

mvn install:安装当前工程到本地仓库
  &gt; mvn install:install-file -DgroupId=<span class="nt">&lt;groupId&gt;</span> -DartifactId=<span class="nt">&lt;artifactId&gt;</span> -Dversion=1.0.0 -Dpackaging=jar -Dfile=<span class="nt">&lt;myfile.jar&gt;</span>

mvn eclipse:eclipse
  &gt; 打开eclipse
  &gt; 菜单选择：file&gt;import&gt;general&gt;existing projects into worksapve,导入即可

mvn eclipse:clean
   清除有关eclipse项目的配置信息

mvn jar:jar 只打jar包

"组合命令"
   mvn clean package = mvn clean <span class="err">&amp;&amp;</span> mvn package
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636439984804-fb9773a3-63a5-45b6-97bd-8f3b2663f67a.png#clientId=u85a961f6-7950-4&amp;from=paste&amp;height=129&amp;id=uef1596c7&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=258&amp;originWidth=1594&amp;originalType=binary&amp;ratio=1&amp;size=421632&amp;status=done&amp;style=none&amp;taskId=ue1b08936-de24-46a9-a51d-79ae3fde1e5&amp;width=797" alt="image.png" /></p><h4 id="maven-属性">maven 属性</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>${basedir}  表示项目根目录,即包含pom.xml文件的目录
${version} 项目的版本
${project.basedir} == ${basedir}
${project.baseUri} 表示项目文件地址
${maven.build.timestamp} 项目构建开始时间
${maven.build.timestamp.format} 表示属性 ${maven.build.timestamp} 的展示格式


"pom属性 使用pom属性可以引用到pom.xml文件对应元素的值"
${project.build.directory}  表示主源码路径;   //相当于maven的target的属性
${project.build.sourceEncoding}  表示主源码的编码格式;
${project.build.sourceDirectory}  表示主源码路径;
${project.build.finalName}  表示输出文件名称;  //相当于maven工厂的终极名称
${project.version}  表示项目版本,与${version}相同;



自定义属性(在pom.xml文件的<span class="nt">&lt;properties&gt;</span>标签下定义的maven属性)
<span class="nt">&lt;project&gt;</span>
    <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;my.pro&gt;</span>adc <span class="nt">&lt;/my.pro&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
<span class="nt">&lt;/project&gt;</span>
在其他地方使用${my.pro}使用该属性

</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636439627956-ae12559f-6798-44e1-aebe-d4a3e213d6c3.png#clientId=u85a961f6-7950-4&amp;from=paste&amp;height=254&amp;id=u853d77ef&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=508&amp;originWidth=1618&amp;originalType=binary&amp;ratio=1&amp;size=405201&amp;status=done&amp;style=none&amp;taskId=u156f37bc-a9b2-451c-a6ac-adec6d6d7df&amp;width=809" alt="image.png" /> ​</p><h4 id="pomxml">pom.xml</h4><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="s">"&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;"</span>
<span class="n">根元素下的第一个子元素modelVersion指定了当前POM模型的版本</span><span class="err">，</span><span class="n">对于Maven2及Maven</span> <span class="mi">3</span><span class="n">来说</span><span class="err">，</span><span class="n">它只能是4</span><span class="o">.</span><span class="mf">0.0</span><span class="err">。</span>
<span class="s">"groupId"</span>
    <span class="n">通常为项目的顶级包名</span><span class="err">。</span>
    <span class="n">定义了项目属于哪个组</span><span class="err">，</span><span class="n">这个组往往和项目所在的组织或公司存在关联</span><span class="err">，</span><span class="n">譬如你的公司是mycom</span><span class="err">，</span><span class="n">有一个项目为myapp</span><span class="err">，</span><span class="n">那么groupId就应该是com</span><span class="o">.</span><span class="na">mycom</span><span class="o">.</span><span class="na">myapp</span><span class="err">。</span>
<span class="s">"artifactId"</span>
    <span class="n">通常为项目名</span>
    <span class="n">定义了当前Maven项目在组中唯一的ID</span><span class="err">，</span><span class="n">在前面的groupId为com</span><span class="o">.</span><span class="na">mycompany</span><span class="o">.</span><span class="na">app的例子中</span><span class="err">，</span><span class="n">你可能会为不同的子项目</span><span class="err">（</span><span class="n">模块</span><span class="err">）</span><span class="n">分配artifactId</span><span class="err">，</span>
    <span class="n">如</span><span class="err">：</span><span class="n">myapp</span><span class="o">-</span><span class="n">util</span><span class="err">、</span><span class="n">myapp</span><span class="o">-</span><span class="n">domain</span><span class="err">、</span><span class="n">myapp</span><span class="o">-</span><span class="n">web等等</span><span class="err">。</span><span class="n">本例中artifactId</span> <span class="n">为</span> <span class="n">my</span><span class="o">-</span><span class="n">app</span>
<span class="s">"version"</span>
    <span class="n">当前项目版本</span>
    <span class="n">项目的版本号</span><span class="err">，</span><span class="n">在开发的不同阶段</span><span class="err">，</span><span class="n">你需要更改这个版本号</span><span class="err">。</span>
    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">1.0</span><span class="o">-</span><span class="no">SNAPSHOT</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>

<span class="s">"packaging"</span>
    <span class="n">打包类型</span>
    <span class="n">项目发布时的打包类型</span><span class="err">。</span><span class="n">比如对于普通Java程序打包为jar文件</span><span class="err">；</span><span class="n">对于Java</span> <span class="n">web项目则打包为war文件</span><span class="err">。</span>
    <span class="n">当为pom的时候</span><span class="err">，</span><span class="n">不会打包成任何文件</span><span class="err">，</span><span class="n">只是表示当前项目为一个父项目</span>
    <span class="n">name</span><span class="err">：</span><span class="n">通常也是项目名</span>
        <span class="n">声明了一个对于用户更为友好的项目名称</span><span class="err">，</span><span class="n">虽然这不是必须的</span><span class="err">，</span><span class="n">但我还是推荐为每个POM声明name</span><span class="err">，</span><span class="n">以方便信息交流用于产生文档</span>
    <span class="n">url</span><span class="err">：</span><span class="n">项目的主页</span><span class="err">。</span>
<span class="o">&lt;</span><span class="n">url</span><span class="o">&gt;</span><span class="nl">http:</span><span class="c1">//www.baidu.com/bwanseon&lt;/url&gt;</span>

<span class="s">"parent"</span>
 <span class="n">artifactId</span> <span class="n">父项目的artifct标识符</span>
 <span class="n">groupId</span> <span class="n">父项目的group标识符</span>
 <span class="n">version</span> <span class="n">父项目的版本</span>
 <span class="n">relativePath</span> <span class="n">父项目的pom</span><span class="o">.</span><span class="na">xml文件的相对路径</span>
 <span class="n">默认为</span><span class="o">../</span><span class="n">pom</span><span class="o">.</span><span class="na">xml</span> <span class="n">maven首先从当前构建项目开始查找父项目的pom文件</span><span class="err">，</span><span class="n">然后从本地仓库</span><span class="err">，</span><span class="n">最后从远程仓库</span>
 <span class="nc">RelativePath</span> <span class="n">允许你选择一个不同的位置</span>
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>项目开发者列表
<span class="nt">&lt;developers&gt;</span>
 项目开发者信息
 <span class="nt">&lt;developer&gt;</span>
   SCM项目开发者的唯一标识符
   <span class="nt">&lt;id&gt;</span>HELLO WORLD<span class="nt">&lt;/id&gt;</span>
    项目开发者的名字
   <span class="nt">&lt;name&gt;</span>banseon<span class="nt">&lt;/name&gt;</span>
    项目开发者的邮箱
   <span class="nt">&lt;email&gt;</span>aouo1987@163.com<span class="nt">&lt;/email&gt;</span>
   项目开发者的主页
   <span class="nt">&lt;url</span> <span class="nt">/&gt;</span>
   项目开发者在项目中扮演的角色，角色元素描述了各种角色
   <span class="nt">&lt;roles&gt;</span>
      <span class="nt">&lt;role&gt;</span>Project Manager<span class="nt">&lt;/role&gt;</span>
      <span class="nt">&lt;role&gt;</span>Architect&gt;
    <span class="nt">&lt;roles&gt;</span>
    项目开发者所属组织
    <span class="nt">&lt;organization&gt;</span>demo<span class="nt">&lt;/organization&gt;</span>
    项目开发者所属组织的URL
    <span class="nt">&lt;organizationUrl&gt;</span>http://hi.baidu.com<span class="nt">&lt;/organizationUrl&gt;</span>
    项目开发者属性
    <span class="nt">&lt;properties&gt;</span>
      <span class="nt">&lt;dept&gt;</span>No<span class="nt">&lt;/dept&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
    开发者所在时区 -11到12
    <span class="nt">&lt;timezone&gt;</span>8<span class="nt">&lt;/timezone&gt;</span>
  <span class="nt">&lt;developer&gt;</span>
<span class="nt">&lt;/developers&gt;</span>
</code></pre></div></div><h5 id="resouces">resouces</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;resources&gt;</span>
   <span class="c">&lt;!--这个元素描述了项目相关或测试相关的所有资源路径--&gt;</span>
   <span class="nt">&lt;resource&gt;</span>
    <span class="c">&lt;!-- 描述了资源的目标路径。该路径相对target/classes目录（例如${project.build.outputDirectory}）。举个例 子，如果你想资源在特定的包里(org.apache.maven.messages)，你就必须该元素设置为org/apache/maven/messages。然而，如果你只是想把资源放到源码目录结构里，就不需要该配置。--&gt;</span>
    <span class="nt">&lt;targetPath/&gt;</span>
    <span class="c">&lt;!--是否使用参数值代替参数名。参数值取自properties元素或者文件里配置的属性，文件在filters元素里列出。--&gt;</span>
    <span class="nt">&lt;filtering/&gt;</span>
    <span class="c">&lt;!--描述存放资源的目录，该路径相对POM路径--&gt;</span>
    <span class="nt">&lt;directory/&gt;</span>
    <span class="c">&lt;!--包含的模式列表，例如**/*.xml.--&gt;</span>
    <span class="nt">&lt;includes/&gt;</span>
    <span class="c">&lt;!--排除的模式列表，例如**/*.xml--&gt;</span>
    <span class="nt">&lt;excludes/&gt;</span>
   <span class="nt">&lt;/resource&gt;</span>
  <span class="nt">&lt;/resources&gt;</span>
</code></pre></div></div><h5 id="repositories">repositories</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pom.xml中repositories标签作用是用来配置maven项目的远程仓库
<span class="nt">&lt;repositories&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
        <span class="nt">&lt;id&gt;</span> 远程仓库唯一标识符<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;url&gt;</span> 远程仓库的url <span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/repositories&gt;</span>
</code></pre></div></div><h4 id="maven-聚合依赖">maven 聚合依赖</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>对于聚合模块来说，它知道有哪些被聚合的模块，而对于被聚合的模块来说，他们不知道被谁聚合了，也不到他的存在。
对于继承关系的父POM来说，它不知道自己被哪些子模块继承了，对于POM来说，它必须知道自己父POM是谁。
</code></pre></div></div><h5 id="maven-的聚合特征">maven 的聚合特征</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 在开发过程中，创建了2个以上的模块，每个模块都是一个独立的maven project。
 在开始的时候我们可以独立的编译和测试运行的每个模块，随着项目的不端变大和复杂化，我们期望能够使用简单的操作来完成编译等工作，这时maven给出了聚合的配置方式。
  聚合的目的就是把多个模块聚合到一起、。

  <span class="nt">&lt;modules&gt;</span>
    <span class="nt">&lt;module&gt;</span>模块1<span class="nt">&lt;/module&gt;</span>
    <span class="nt">&lt;module&gt;</span>模块2<span class="nt">&lt;/module&gt;</span>
    <span class="nt">&lt;module&gt;</span>模块3<span class="nt">&lt;/module&gt;</span>
  <span class="nt">&lt;/modules&gt;</span>

ps：其中module的路径为相对路径
例如：对项目中的Hello ,HelloFriend,MakeFriend进行聚合
<span class="nt">&lt;modules&gt;</span>
    <span class="nt">&lt;module&gt;</span>../Hello<span class="nt">&lt;/module&gt;</span>
    <span class="nt">&lt;module&gt;</span>../HelloFriend<span class="nt">&lt;/module&gt;</span>
    <span class="nt">&lt;module&gt;</span>../MakeFriend<span class="nt">&lt;/module&gt;</span>
<span class="nt">&lt;/modules&gt;</span>

1）聚合本身也是一个Maven项目，它必须有自己的Pom
2) 打开方式必须为packaging
3) 引入新的元素 modules--module
4) 版本：聚合模块的版本和被聚合模块的版本一致
5）relative path: 每个module的值都是一个当前POM的相对目录
6）聚合模块的本质：聚合模块的内容仅仅是一个pom.xml文件，不包含src/main/java..等目录，因为它是用来帮助其他模块构建的工具，本身并没有实质的内容。
7）聚合模块和被聚合模块的关系： 可以是父子关系，也可以是平行结构。 如果使用的是平行结构，那么聚合模块的POM也需要做出相应的更改。
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>packaging的类型为pom.xml;module的值是一个以当前POM为主目录的相对路径。

<span class="nt">&lt;project&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.ys.account<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>account-aggregator<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;packaging&gt;</span> pom <span class="nt">&lt;/packaging&gt;</span>
    <span class="nt">&lt;name&gt;</span>Account Aggregator<span class="nt">&lt;/name&gt;</span>
     <span class="nt">&lt;modules&gt;</span>
        <span class="nt">&lt;module&gt;</span>../account-email<span class="nt">&lt;/module&gt;</span>
        <span class="nt">&lt;module&gt;</span>../account-persist<span class="nt">&lt;/module&gt;</span>
     <span class="nt">&lt;/modules&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div><h5 id="maven-的继承特征">maven 的继承特征</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    在项目开发的过程中，可能多个模块独立的开发，但是多个模块可能依赖相同的元素，比如说每个模块都需要Junit，使用Spring的时候，其核心jar也必须都被引入。在编译的时候maven-compile-plugin插件也要被引入、
如何配置继承：
1) 继承可以肯定是一个父子结构，我们可以在模块中创建一个parent project
2) 父模块的packing必须是pom
3）父模块不需要src/main/java 等目录
4）子模块中使用parent标签加载父模块信息
5) parent的属性：relativePath表示父模块POM的相对路径，在构建的时候，maven会先根据relativePath检查
父POM，如果找不到在从本地仓库查找。 relativePath的默认值为：../pom.xml
6) 子模块省略groupId和version，使用了继承的子模块中可以不声明groupId和version，子模块将隐式的继承父模块的这两个元素

</code></pre></div></div><h5 id="可以被继承的-pom-元素">可以被继承的 pom 元素</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>groupId：项目组ID，项目坐标的核心元素
version：项目版本，项目坐标的核心元素
description：项目的描述信息
organization:项目的组织信息
inceptionYear: 项目的创始年份
url：项目的URL地址
developer:项目开发者信息
contributors: 项目的贡献者信息
distributionManagement:项目的部署配置
issueManagement：项目的持续集成系统信息
ciManagement:项目的持续集成系统信息
scm:项目的版本控制系统信息
mailingLists:项目的邮件列表信息
properties:自定义的mavne属性
dependencies:项目的依赖配置
dependencyManagement:项目的依赖管理配置
repositories:项目的仓库配置
build:包括项目的源码目录配置，输出目录配置，插件配置，插件管理配置等。
reporting:包括项目的报告输出目录配置，报告插件配置等

</code></pre></div></div><h4 id="maven-的依赖管理">maven 的依赖管理</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 我们知道dependencies是可以被继承的，这个时候我们就想到让我们发生了公用的依赖元素转移到parent中，这样我们就更进一步的优化了配置。
可是这样就带来一个信息的问题，如果有一天创建一个新的模块，并且这个新的模块不需要parent的依赖，这时候应该如何处理？
  maven依赖管理就是来解决这个问题的，新增加一个新的元素 dependencyManagement
  从上面的列表中我们发现dependencyManagement也是可以被继承，这样就恰恰满足了我们的需要，它既能让子模块继承到父模块的依赖配置，又能保证子模块依赖使用的灵活性。

dependencyManagement的特性：
   在dependencyManagement中配置的元素，既不会给parent引入依赖，也不会给它的子模块进入依赖，仅仅是它的配置是可以被继承的

父模块中配置依赖管理：
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636494772599-56b47bd4-b962-4add-a932-22782e3d1af8.png#clientId=ua7e09150-4cf3-4&amp;from=paste&amp;height=540&amp;id=u44c11d40&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=1080&amp;originWidth=1610&amp;originalType=binary&amp;ratio=1&amp;size=1597762&amp;status=done&amp;style=none&amp;taskId=u376376a7-4c46-43ba-8e43-17fd2c1e6d6&amp;width=805" alt="image.png" /></p><blockquote><p><strong><em>子模块中继承模块中的依赖信息</em></strong></p></blockquote><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636494801537-1cf5b98b-e52c-465a-9d0d-869eaa0591de.png#clientId=ua7e09150-4cf3-4&amp;from=paste&amp;height=393&amp;id=u08413b05&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=786&amp;originWidth=1590&amp;originalType=binary&amp;ratio=1&amp;size=997896&amp;status=done&amp;style=none&amp;taskId=u6f1209f9-276f-4cd0-ae5c-a3ef96c0954&amp;width=795" alt="image.png" /></p><h5 id="dependencymanagement">dependencymanagement</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Maven 使用dependencyManagement 元素来提供了一种管理依赖版本号的方式。
通常会在一个组织或者项目的最顶层的父POM 中看到dependencyManagement 元素。
使用pom.xml 中的dependencyManagement 元素能让所有在子项目中引用一个依赖而不用显式的列出版本号。
Maven 会沿着父子层次向上走，直到找到一个拥有dependencyManagement 元素的项目，然后它就会使用在这个dependencyManagement 元素中指定的版本号。

<span class="nt">&lt;dependencyManagement&gt;</span>
 <span class="nt">&lt;dependencies&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
   <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
   <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>5.1.2<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  ...
 <span class="nt">&lt;dependencies&gt;</span>
<span class="nt">&lt;/dependencyManagement&gt;</span>
然后在子项目里就可以添加mysql-connector时可以不指定版本号，例如：
<span class="nt">&lt;dependencies&gt;</span>
 <span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
 <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
这样做的好处就是：如果有多个子项目都引用同一样依赖，则可以避免在每个使用的子项目里都声明一个版本号，这样当想升级或切换到另一个版本时，只需要在顶层父容器里更新，而不需要一个一个子项目的修改 ；另外如果某个子项目需要另外的一个版本，只需要声明version就可。

dependencyManagement里只是声明依赖，并不实现引入，因此子项目需要显式的声明需要用的依赖。
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"dependencies"
相对于dependencyManagement，所有声明在dependencies里的依赖都会自动引入，并默认被所有的子项目继承。
"maven依赖作用域"
<span class="nt">&lt;dependency&gt;</span>中还引入了<span class="nt">&lt;scope&gt;</span>,
 它主要管理依赖的部署，目前scop分为5个值
       test：表示在测试范围有效，在编译和打包的时候都不会使用这个依赖
   complile：表示在编译范围有效，在编译和打包的时候把依赖存储进去,默认的依赖范围是compile
   provided：表示在编译和测试的过车有效,打包的时不打包进去，比如web中servlet包, 在Tomcat的lib已经有该包，所依打包的时候就不用再打包进去，否则会有冲突。
    runtime：在运行的时候依赖，在编译的时候不依赖。
       test：的依赖范围不会传递
"dependency的type的类型"
     dependency中type默认为jar即引入一个特定的jar包。
     当我们有需要jar的时候,会导致pom.xml过大,我们可以引入一个type为pom的依赖,意味着我们可以将所有的jar包打包成一个pom,然后我们依赖了pom即可下载所有的jar包。
</code></pre></div></div><h5 id="依赖的传递和排除">依赖的传递和排除</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>依赖是会被传递
A--&gt;C B--&gt;A  相当于  B--&gt;C（这种依赖是基于compile这个范围进行传递的）


A&gt;&gt;&gt;&gt;&gt;Lversion1.1 直接依赖
B&gt;&gt;&gt;&gt;&gt;Lversion1.2 直接依赖
C&gt;&gt;&gt;&gt;&gt;A<span class="err">&amp;&amp;</span>B (A和B对L的依赖级别相同,那个先被C依赖,L的版本就是那个中的版本。)
在C中如果先依赖A 则L的版本为Lversion1.1
在C中如果先依赖B 则L的版本为Lversion1.2

A和B对L的依赖级别不同的时候，C中依赖的时候那依赖的级别短L的版本就是那个项目的
如A &gt;&gt;&gt;M&gt;&gt;&gt;Lversion1.1
   B&gt;&gt;&gt;Lversion1.2
C&gt;&gt;&gt;&gt;&gt;A<span class="err">&amp;&amp;</span>B
即使C先依赖A，但是在C中Lversion传递来的版本还是B中Lversion的版本Lversion1.2

如果C中不要B中Lversion的版本，可以在依赖B时，对L1.2(使用Exclusions进行排除依赖)排除依赖，这样C中L的版本就A中L1.1的版本
<span class="nt">&lt;dependency&gt;</span>
 <span class="nt">&lt;groupId&gt;</span>${project.groupId}<span class="nt">&lt;/groudpId&gt;</span>
 <span class="nt">&lt;artifactId&gt;</span>user-log<span class="nt">&lt;/artifactId&gt;</span>
 <span class="nt">&lt;version&gt;</span>${project.version}<span class="nt">&lt;/version&gt;</span>
 <span class="nt">&lt;exclusions&gt;</span>
  <span class="c">&lt;!-- 可以排除的依赖--&gt;</span>
   <span class="nt">&lt;exclusion&gt;</span>
     <span class="nt">&lt;groupId&gt;</span>xxxx.xxx<span class="nt">&lt;/groupId&gt;</span>
     <span class="nt">&lt;artifactId&gt;</span>xxx<span class="nt">&lt;/artifiactId&gt;</span>
   <span class="nt">&lt;/exclusion&gt;</span>
 <span class="nt">&lt;/exclusions&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>我们可以使用exclusions元素声明排除依赖
exclusions可以包含一个或者多个exclusion子元素，因此可以排除一个或者多个传递性依赖。
需要注意的是，声明exclusions的时候只需要groupId和artifactId，而不需要version元素，这是因为只需要groupId和artifactId就能唯一定位依赖图中的某个依赖。换句话说，Maven解析后的依赖中，不可能出现groupId和artifactId相同，但是version不同的两个依赖。
</code></pre></div></div><h3 id="maven-插件">maven 插件</h3><h4 id="maven-的插件管理">maven 的插件管理</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maven是一个执行插件的框架，每一个任务实际上是由插件完成的。maven插件通常用于
创建jar文件
创建war文件
编译代码文件
进行代码单元测试
创建项目文档
创建项目报告
一个插件通常提供一组目标。可以使用下面语法进行执行

mvn [plugin-name]:[goal-name]
ps:
 一个java项目可以使用Maven编译器插件来编译目标，通过运行以下命令编译
mvn compiler:compile
</code></pre></div></div><h5 id="插件类型">插件类型</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>构建插件： 在生成过程中执行，并在pom.xml中的<span class="nt">&lt;build/&gt;</span>元素进行配置
报告插件：  在网站生成期间执行，在pom.xml中的<span class="nt">&lt;reporting/&gt;</span>元素进行配置
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636494480739-45f93e3f-2e1d-4ff6-b9e0-a9568f39ec21.png#clientId=ua7e09150-4cf3-4&amp;from=paste&amp;height=362&amp;id=udf752291&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=724&amp;originWidth=1596&amp;originalType=binary&amp;ratio=1&amp;size=891573&amp;status=done&amp;style=none&amp;taskId=uf3da54e8-a73d-4e51-943e-c6c4568428b&amp;width=798" alt="image.png" /></p><h5 id="pluginmanagement">pluginmanagement</h5><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pluginmanagement是表示插件的声明，即在你的项目中的pluginManagement下声明了插件，mavan并不会加载该插件，pluginManageMent声可以被继承。

pluginManagement的一个使用案例是当有父子项目的时候，父项目中可以利用pluginManagement声明子项目中需要用到的插件，之后，当某个或某几个子项目需要加载该插件的时候，就可以在子项目中的plugins节点只配置groupId和artifactId就可以完成插件的引用。
pluginManagement主要是为了统一管理插件，确保所有子项目使用的插件版本保持一致，类似的还是dependencies和dependencyManagement。
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>新增一个新的元素<span class="nt">&lt;pluginManagement&gt;</span>。这个元素和<span class="nt">&lt;dependencyManagement&gt;</span>相类似，它是用来进行插件管理的
 在我们项目开发中也会频繁的引入插件，所以解决这些复杂配置的方法就是使用插件管理
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636494570718-d96e549b-8aca-43fa-a43c-187c42aa37d5.png#clientId=ua7e09150-4cf3-4&amp;from=paste&amp;height=656&amp;id=u6eb27d48&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=1312&amp;originWidth=1606&amp;originalType=binary&amp;ratio=1&amp;size=1536301&amp;status=done&amp;style=none&amp;taskId=u22f3a0dc-8b9b-4b3e-877d-d479261296e&amp;width=803" alt="image.png" /></p><h4 id="maven-shade-plugin">maven-shade-plugin</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--将依赖都打入到一个jar里面--&gt;</span>

<span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;finalName&gt;</span>storm-start-${project.version}<span class="nt">&lt;/finalName&gt;</span>
  <span class="nt">&lt;plugins&gt;</span>
    <span class="nt">&lt;plugin&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>maven-shade-plugin<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>2.4.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
          <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
          <span class="nt">&lt;goals&gt;</span>
            <span class="nt">&lt;goal&gt;</span>shade<span class="nt">&lt;/goal&gt;</span>
          <span class="nt">&lt;/goals&gt;</span>
          <span class="c">&lt;!--  以下内容不一定需要，视情况而定 --&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;transformers&gt;</span>
              <span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;manifestEntries&gt;</span>
                  <span class="nt">&lt;Main-Class&gt;</span>sun.storm.start.tutorial.ExclamationTopology<span class="nt">&lt;/Main-Class&gt;</span>
                <span class="nt">&lt;/manifestEntries&gt;</span>
              <span class="nt">&lt;/transformer&gt;</span>
              <span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">"org.apache.maven.plugins.shade.resource.DontIncludeResourceTransformer"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;resource&gt;</span>.txt<span class="nt">&lt;/resource&gt;</span>
              <span class="nt">&lt;/transformer&gt;</span>
            <span class="nt">&lt;/transformers&gt;</span>
            <span class="nt">&lt;minimizeJar&gt;</span>true<span class="nt">&lt;/minimizeJar&gt;</span>
            <span class="c">&lt;!--文件输出目录--&gt;</span>
            <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}<span class="nt">&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;createDependencyReducedPom&gt;</span>false<span class="nt">&lt;/createDependencyReducedPom&gt;</span>
            <span class="nt">&lt;createSourcesJar&gt;</span>false<span class="nt">&lt;/createSourcesJar&gt;</span>
            <span class="nt">&lt;keepDependenciesWithProvidedScope&gt;</span>false<span class="nt">&lt;/keepDependenciesWithProvidedScope&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
      <span class="nt">&lt;/executions&gt;</span>
    <span class="nt">&lt;/plugin&gt;</span>
  <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>使用maven-shade-plugin插件有一个配置属性 createDependencyReducedPom，默认值为true

这个属性，如果用这个插件来deploy或者发布到中央仓库中，设个属性会缩减pom文件，会把依赖的depency干掉

正确的做法是把这个值修改成false。


</code></pre></div></div><h4 id="maven-source-plugin">maven-source-plugin</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>源码打包

<span class="nt">&lt;plugin&gt;</span>
 <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
 <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
 <span class="nt">&lt;configuration&gt;</span>
   <span class="nt">&lt;attach&gt;</span>true<span class="nt">&lt;/attach&gt;</span>
   <span class="nt">&lt;encoding&gt;</span>${project.build.sourceEncoding}<span class="nt">&lt;/encoding&gt;</span>
 <span class="nt">&lt;/configuration&gt;</span>
 <span class="nt">&lt;executions&gt;</span>
  <span class="nt">&lt;execution&gt;</span>
    <span class="nt">&lt;phase&gt;</span>compile<span class="nt">&lt;/phase&gt;</span>
    <span class="nt">&lt;goals&gt;</span>
       <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
    <span class="nt">&lt;/goals&gt;</span>
  <span class="nt">&lt;/execution&gt;</span>
 <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div><h4 id="maven-javadoc-plugin">maven-javadoc-plugin</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"该插件用于javadoc 包"
<span class="nt">&lt;plugin&gt;</span>
 <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
 <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
 <span class="nt">&lt;version&gt;</span>2.7<span class="nt">&lt;/version&gt;</span>
 <span class="nt">&lt;exections&gt;</span>
   <span class="nt">&lt;exection&gt;</span>
      <span class="nt">&lt;id&gt;</span>attach-javadocs<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;goals&gt;</span>
         <span class="nt">&lt;goal&gt;</span>
            jar
         <span class="nt">&lt;/goal&gt;</span>
      <span class="nt">&lt;/goals&gt;</span>
   <span class="nt">&lt;/exection&gt;</span>
 <span class="nt">&lt;/exections&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div><h4 id="maven-jar-plugin">maven-jar-plugin</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maven-jar-plugin用于生成META-INF/MANIFEST.MF文件的指定Main-Class 这样才能确定程序入口在哪里
<span class="nt">&lt;mainClass&gt;</span> com.aouo.Main<span class="nt">&lt;/mainClass&gt;</span>
<span class="nt">&lt;addClassPath&gt;</span>true<span class="nt">&lt;/addClassPath&gt;</span> -- 会在MANIFEST.MF加上Class-path项并配置依赖包
<span class="nt">&lt;classpathPrefix&gt;</span>lib/<span class="nt">&lt;/classpathPrefix&gt;</span>  --指定依赖包所在目录

通过maven-jar-plugin只是生成了MANIFEST.MF文件这还不够,我们还需要将依赖包拷贝到相关的目录下，本例子中是需要拷贝的lib目录下
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.6<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;executions&gt;</span>
    <span class="nt">&lt;execution&gt;</span>
      <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
      <span class="nt">&lt;goals&gt;</span>
        <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
      <span class="nt">&lt;/goals&gt;</span>
      <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;archive&gt;</span>
          <span class="nt">&lt;manifest&gt;</span>
           <span class="c">&lt;!--jar包的MF文件中生成class-path属性--&gt;</span>
           <span class="nt">&lt;addClasspath&gt;</span> true<span class="nt">&lt;/addClasspath&gt;</span>
           <span class="c">&lt;!--class-path前缀--&gt;</span>
           <span class="nt">&lt;classpathPrefix&gt;</span>lib<span class="nt">&lt;/classpathPrefix&gt;</span>
           <span class="c">&lt;!--main全限定名--&gt;</span>
           <span class="nt">&lt;mainClass&gt;&lt;/mainClass&gt;</span>
          <span class="nt">&lt;/manifest&gt;</span>
          <span class="c">&lt;!--添加classpath缺少的内容--&gt;</span>
          <span class="nt">&lt;manifestEntries&gt;</span>
             <span class="c">&lt;!--添加缺少的jar包--&gt;</span>
             <span class="nt">&lt;Class-path&gt;</span> lib/xxx.jar<span class="nt">&lt;/Class-path&gt;</span>
             <span class="c">&lt;!--添加缺少的配置文件  用maven在MANIFEST.MF资料中的Class-Path 中增加当前目录 conf/（如下截图）--&gt;</span>
             <span class="nt">&lt;Class-path&gt;</span> conf/ <span class="nt">&lt;/Class-path&gt;</span>
          <span class="nt">&lt;/manifestEntries&gt;</span>
        <span class="nt">&lt;/archive&gt;</span>
      <span class="nt">&lt;/configuration&gt;</span>
    <span class="nt">&lt;/execution&gt;</span>
  <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/659846/1636439466072-61d95166-e4df-43bf-b415-d1c4bf50bfad.png#clientId=u85a961f6-7950-4&amp;from=paste&amp;height=151&amp;id=u814177bb&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=302&amp;originWidth=1634&amp;originalType=binary&amp;ratio=1&amp;size=321861&amp;status=done&amp;style=none&amp;taskId=u87a3babc-2f67-4644-b76e-808e3b52e40&amp;width=817" alt="image.png" /></p><h4 id="maven-dependency-plugin">maven-dependency-plugin</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maven-dependency-plugin用于将依赖的jar拷贝到相关的目录下。
  如下意思是在打包过程中将所有依赖的jar包都拷贝到${project.build.direction}/lib下。
  这样通过mvn package指令后,会将所有的依赖包都拷贝到target/lib目录下。
如果我们希望能够把他们同一打包到一个目录下，如lib文件夹。

<span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;executions&gt;</span>
    <span class="nt">&lt;execution&gt;</span>
      <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
      <span class="nt">&lt;goals&gt;</span>
        <span class="nt">&lt;goal&gt;</span>copy-dependencies<span class="nt">&lt;/goal&gt;</span>
      <span class="nt">&lt;/goals&gt;</span>
      <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;outputDirectory&gt;</span>${project.build.direction}/lib<span class="nt">&lt;/outputDirectory&gt;</span>
      <span class="nt">&lt;/configuration&gt;</span>
    <span class="nt">&lt;/execution&gt;</span>
  <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>

</code></pre></div></div><h4>​</h4><h4 id="maven-compiler-plugin">maven-compiler-plugin</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"jave 编译环境"
<span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;source&gt;</span>1.7<span class="nt">&lt;/source&gt;</span>
    <span class="nt">&lt;target&gt;</span>1.7<span class="nt">&lt;/target&gt;</span>
    <span class="nt">&lt;encoding&gt;</span>UTF-8<span class="nt">&lt;/encoding&gt;</span>
    <span class="nt">&lt;compilerVersion&gt;</span>${jdk.version}<span class="nt">&lt;/compilerVersion&gt;</span>
    <span class="nt">&lt;verbose&gt;</span>true<span class="nt">&lt;/verbose&gt;</span>
  <span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>


"编译时导入了第三方的jar包"
<span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;source&gt;</span>1.7<span class="nt">&lt;/source&gt;</span>
    <span class="nt">&lt;target&gt;</span>1.7<span class="nt">&lt;/target&gt;</span>
    <span class="nt">&lt;encoding&gt;</span>UTF-8<span class="nt">&lt;/encoding&gt;</span>
    <span class="nt">&lt;compilerArguments&gt;</span>
       <span class="nt">&lt;extdirs&gt;</span>src/main/webapp/WEB-INF/lib<span class="nt">&lt;extdirs&gt;</span>
    <span class="nt">&lt;/compilerArguments&gt;</span>
  <span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>


"编译节点指定外部lib"
 <span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;configuration&gt;</span>
             <span class="nt">&lt;source&gt;</span>1.8<span class="nt">&lt;/source&gt;</span>
             <span class="nt">&lt;target&gt;</span>1.8<span class="nt">&lt;/target&gt;</span>
             <span class="nt">&lt;encoding&gt;</span>UTF-8<span class="nt">&lt;/encoding&gt;</span>
             <span class="nt">&lt;compilerArguments&gt;</span>
                 <span class="nt">&lt;extdirs&gt;</span>src/main/java/webapps/WEB-INF/lib<span class="nt">&lt;/extdirs&gt;</span><span class="c">&lt;!--指定外部lib--&gt;</span>
             <span class="nt">&lt;/compilerArguments&gt;</span>
     <span class="nt">&lt;/configuration&gt;</span>
 <span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div><h4 id="maven-assembly-plugin">maven-assembly-plugin</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>的用途是制作项目分发包，该分发包可能包含了项目的可执行文件，源代码，readme,平台脚本等等
maven-assembly-plugin 支持各种主流的格式如：zip,tar.gz.jar.war等，具体打包那些文件是高度可控的


使用 descriptorRefs(官方提供的定制化打包方式)，官方提供的 descriptorRef 有 bin, jar-with-dependencies, src, project
bin ： 类似于默认打包，会将bin目录下的文件打到包中
jar-with-dependencies ： 会将所有依赖都解压打包到生成物中
src ：只将源码目录下的文件打包
project ： 将整个project资源打包


 <span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span> maven-assembly-plugin <span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;configuration&gt;</span>
         <span class="nt">&lt;descriptorRefs&gt;</span>
             <span class="nt">&lt;descriptorRef&gt;</span>jar-with-dependencies<span class="nt">&lt;/descriptorRef&gt;</span>  //将依赖打包
         <span class="nt">&lt;/descriptorRefs&gt;</span>
         <span class="nt">&lt;archive&gt;</span>
              <span class="nt">&lt;manifest&gt;</span>
                 <span class="nt">&lt;mainClass&gt;</span>com.cetc.di.App<span class="nt">&lt;/mainClass&gt;</span> //主类
              <span class="nt">&lt;/manifest&gt;</span>
         <span class="nt">&lt;/archive&gt;</span>
     <span class="nt">&lt;/configuration&gt;</span>
     <span class="nt">&lt;executions&gt;</span>
        <span class="nt">&lt;execution&gt;</span>
           <span class="nt">&lt;id&gt;</span>make-assembly<span class="nt">&lt;/id&gt;</span>
           <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span> //打包节点
           <span class="nt">&lt;goals&gt;</span>
               <span class="nt">&lt;goal&gt;</span>single<span class="nt">&lt;/goal&gt;</span> //打成单一包
            <span class="nt">&lt;/goals&gt;</span>
        <span class="nt">&lt;/execution&gt;</span>
    <span class="nt">&lt;/executions&gt;</span>
 <span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"通过descriptor引入外部打包文件"
<span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>maven-assembly-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>3.0.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;configuration&gt;</span>
     <span class="nt">&lt;descriptors&gt;</span>
      <span class="nt">&lt;descriptor&gt;</span>src/assembly/assembly.xml<span class="nt">&lt;/descriptor&gt;</span>  //<span class="c">&lt;!--配置描述文件路径--&gt;</span>
     <span class="nt">&lt;/descriptors&gt;</span>
  <span class="nt">&lt;/configuration&gt;</span>


使用 descriptors，指定打包文件 src/assembly/src.xml，在该配置文件内指定打包操作。
"自定义打包文件解析"
  'id描述符文件元素'
        id：<span class="nt">&lt;id&gt;</span>release<span class="nt">&lt;/id&gt;</span>
  'formats 指定打包格式'
      maven-assembly-plugin 支持的打包格式有zip、tar、tar.gz (or tgz)、tar.bz2 (or tbz2)、jar、dir、war，可以同时指定多个打包格式
      <span class="nt">&lt;formats&gt;</span>
          <span class="nt">&lt;format&gt;</span>tar.gz<span class="nt">&lt;format&gt;</span>
          <span class="nt">&lt;format&gt;</span>dir<span class="nt">&lt;format&gt;</span>
      <span class="nt">&lt;/formats&gt;</span>
  "dependencySets 定制工程依赖jar包的打包方式" 核心元素如下：
      outputDirectory	String        	指定包依赖目录，该目录是相对于根目录
      includes/include*	List<span class="nt">&lt;String&gt;</span>	包含依赖
      excludes/exclude*	List<span class="nt">&lt;String&gt;</span>	排除依赖

      <span class="nt">&lt;dependencySets&gt;</span>
        <span class="nt">&lt;dependencySet&gt;</span>
             //是否把本项目添加到依赖文件夹下
             <span class="nt">&lt;useProjectArtifact&gt;</span>true<span class="nt">&lt;/useProjectArtifact&gt;</span>
             <span class="nt">&lt;outputDirectory&gt;</span>lib<span class="nt">&lt;/outputDirectory&gt;</span>
             //将scope为runtime的依赖包打包
             <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
             <span class="nt">&lt;excludes&gt;</span>
                <span class="nt">&lt;exclude&gt;</span>storm:storm<span class="nt">&lt;/exclude&gt;</span>   //排除指定的依赖
             <span class="nt">&lt;/excludes&gt;</span>
        <span class="nt">&lt;/dependencySet&gt;</span>
      <span class="nt">&lt;/dependencySets&gt;</span>

   "fileSets 管理一组文件的存放位置" 核心元素如下：
      outputDirectory	String	        指定文件集合的输出目录，该目录是相对于根目录
      includes/include*	List<span class="nt">&lt;String&gt;</span>	包含文件
      excludes/exclude*	List<span class="nt">&lt;String&gt;</span>	排除文件
             fileMode	String	        指定文件属性，使用八进制表达，分别为(User)(Group)(Other)所属属性，默认为 0644
     <span class="nt">&lt;fileSets&gt;</span>
        <span class="nt">&lt;fileSet&gt;</span>
          <span class="nt">&lt;includes&gt;</span>
            <span class="nt">&lt;include&gt;</span>bin/**<span class="nt">&lt;/include&gt;</span>
          <span class="nt">&lt;/includes&gt;</span>
          <span class="nt">&lt;fileMode&gt;</span>0755<span class="nt">&lt;/fileMode&gt;</span>
        <span class="nt">&lt;/fileSet&gt;</span>
        <span class="nt">&lt;fileSet&gt;</span>
          <span class="nt">&lt;includes&gt;</span>
            <span class="nt">&lt;include&gt;</span>/conf/**<span class="nt">&lt;/include&gt;</span>
            <span class="nt">&lt;include&gt;</span>logs<span class="nt">&lt;/include&gt;</span>
          <span class="nt">&lt;/includes&gt;</span>
        <span class="nt">&lt;/fileSet&gt;</span>
      <span class="nt">&lt;/fileSets&gt;</span>

  "files可以指定目的文件名到指定目录，其他和 fileSets 相同"
     source	        String	源文件，相对路径或绝对路径
  outputDirectory	String	输出目录
        destName	String	目标文件名
        fileMode	String	设置文件 UNIX 属性
  -------------------------
  <span class="nt">&lt;files&gt;</span>
    <span class="nt">&lt;file&gt;</span>
      <span class="nt">&lt;source&gt;</span>README.txt<span class="nt">&lt;/source&gt;</span>
      <span class="nt">&lt;outputDirectory&gt;</span>/<span class="nt">&lt;/outputDirectory&gt;</span>
    <span class="nt">&lt;/file&gt;</span>
  <span class="nt">&lt;/files&gt;</span>

</code></pre></div></div><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"assembly.xml 文件实例"
 <span class="nt">&lt;assembly&gt;</span>
     <span class="nt">&lt;id&gt;&lt;/id&gt;</span>
     <span class="nt">&lt;formats&gt;</span>
         <span class="nt">&lt;format&gt;</span>tar.gz<span class="nt">&lt;/format&gt;</span><span class="c">&lt;!--打包的文件格式,也可以有：war zip--&gt;</span>
     <span class="nt">&lt;/formats&gt;</span>
     <span class="c">&lt;!--tar.gz压缩包下是否生成和项目名相同的根目录--&gt;</span>
     <span class="nt">&lt;includeBaseDirectory&gt;</span>true<span class="nt">&lt;/includeBaseDirectory&gt;</span>
     <span class="nt">&lt;dependencySets&gt;</span>
         <span class="nt">&lt;dependencySet&gt;</span>
             <span class="c">&lt;!--是否把本项目添加到依赖文件夹下--&gt;</span>
             <span class="nt">&lt;useProjectArtifact&gt;</span>true<span class="nt">&lt;/useProjectArtifact&gt;</span>
             <span class="nt">&lt;outputDirectory&gt;</span>lib<span class="nt">&lt;/outputDirectory&gt;</span>
             <span class="c">&lt;!--将scope为runtime的依赖包打包--&gt;</span>
             <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
         <span class="nt">&lt;/dependencySet&gt;</span>
     <span class="nt">&lt;/dependencySets&gt;</span>
     <span class="nt">&lt;fileSets&gt;</span>
         <span class="nt">&lt;fileSet&gt;</span>
             <span class="nt">&lt;directory&gt;</span>src/main/bin<span class="nt">&lt;/directory&gt;</span>
             <span class="nt">&lt;outputDirectory&gt;</span>/<span class="nt">&lt;/outputDirectory&gt;</span>
         <span class="nt">&lt;/fileSet&gt;</span>
     <span class="nt">&lt;/fileSets&gt;</span>
 <span class="nt">&lt;/assembly&gt;</span>
</code></pre></div></div><h4 id="maven-resource-plugin">maven-resource-plugin</h4><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>maven对配置文件的操作有两种方法:
一是在<span class="nt">&lt;build&gt;</span>元素下添加<span class="nt">&lt;resources&gt;</span>进行配置
一是在<span class="nt">&lt;build&gt;</span>的<span class="nt">&lt;plugins&gt;</span>子元素中配置maven-resource-plugin等处理资源文件的插件

 <span class="nt">&lt;plugin&gt;</span>
     <span class="nt">&lt;artifactId&gt;</span>maven-resources-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.6<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;executions&gt;</span>
            <span class="nt">&lt;execution&gt;</span>
              <span class="nt">&lt;id&gt;</span>copy-resources<span class="nt">&lt;/id&gt;</span>
              <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
              <span class="nt">&lt;goals&gt;</span>
                <span class="nt">&lt;goal&gt;</span>copy-resources<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;/goals&gt;</span>
              <span class="nt">&lt;configuration&gt;</span>
                <span class="nt">&lt;encoding&gt;</span>utf-8<span class="nt">&lt;/encoding&gt;</span>
                <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}/conf<span class="nt">&lt;/outputDirectory&gt;</span>
                <span class="nt">&lt;resources&gt;</span>
                  <span class="nt">&lt;resource&gt;</span>
                    <span class="nt">&lt;directory&gt;</span>${basedir}/src/main/resource<span class="nt">&lt;/directory&gt;</span>
                    <span class="nt">&lt;includes&gt;</span>
                      <span class="nt">&lt;include&gt;</span>*.xml<span class="nt">&lt;/include&gt;</span>
                      <span class="nt">&lt;include&gt;</span>*.properties<span class="nt">&lt;/include&gt;</span>
                    <span class="nt">&lt;/includes&gt;</span>
                    <span class="nt">&lt;filtering&gt;</span>false<span class="nt">&lt;/filtering&gt;</span>
                  <span class="nt">&lt;/resource&gt;</span>
                <span class="nt">&lt;/resources&gt;</span>
              <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/execution&gt;</span>
          <span class="nt">&lt;/executions&gt;</span>
 <span class="nt">&lt;/plugin&gt;</span>



"使用标签resource"
  <span class="nt">&lt;build&gt;</span>
    ....
    <span class="nt">&lt;resources&gt;</span>
      <span class="nt">&lt;resource&gt;</span>
        <span class="nt">&lt;directory&gt;</span>src/main/resource<span class="nt">&lt;/directory&gt;</span>

        <span class="nt">&lt;excludes&gt;</span>
          <span class="nt">&lt;exclude&gt;</span>*.properties<span class="nt">&lt;/exclude&gt;</span>
          <span class="nt">&lt;exclude&gt;</span>*.xml<span class="nt">&lt;/exclude&gt;</span>
        <span class="nt">&lt;/excludes&gt;</span>
      <span class="nt">&lt;/resource&gt;</span>
    <span class="nt">&lt;/resources&gt;</span>
    ....
 <span class="nt">&lt;/build&gt;</span>


</code></pre></div></div><h3 id="maven-可执行包">maven 可执行包</h3><div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"pom.xml" 文件设置
<span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;resource&gt;</span>
      <span class="nt">&lt;directory&gt;</span>src/main/resource<span class="nt">&lt;/directory&gt;</span>
      <span class="nt">&lt;excludes&gt;</span>
        <span class="nt">&lt;exclude&gt;</span>*.properties<span class="nt">&lt;/exclude&gt;</span>
        <span class="nt">&lt;exclude&gt;</span>*.xml<span class="nt">&lt;/exclude&gt;</span>
      <span class="nt">&lt;/excludes&gt;</span>
    <span class="nt">&lt;/resource&gt;</span>
  <span class="nt">&lt;/resources&gt;</span>

    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;source&gt;</span>1.7<span class="nt">&lt;/source&gt;</span>
          <span class="nt">&lt;target&gt;</span>1.7<span class="nt">&lt;/target&gt;</span>
          <span class="nt">&lt;encoding&gt;</span>utf-8<span class="nt">&lt;/encoding&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-resources-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.6<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>copy-resources<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>copy-resources<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;encoding&gt;</span>utf-8<span class="nt">&lt;/encoding&gt;</span>
              <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}/conf<span class="nt">&lt;/outputDirectory&gt;</span>
              <span class="nt">&lt;resources&gt;</span>
                <span class="nt">&lt;resource&gt;</span>
                  <span class="nt">&lt;directory&gt;</span>${basedir}/src/main/resource<span class="nt">&lt;/directory&gt;</span>
                  <span class="nt">&lt;includes&gt;</span>
                    <span class="nt">&lt;include&gt;</span>*.xml<span class="nt">&lt;/include&gt;</span>
                    <span class="nt">&lt;include&gt;</span>*.properties<span class="nt">&lt;/include&gt;</span>
                  <span class="nt">&lt;/includes&gt;</span>
                  <span class="nt">&lt;filtering&gt;</span>false<span class="nt">&lt;/filtering&gt;</span>
                <span class="nt">&lt;/resource&gt;</span>
              <span class="nt">&lt;/resources&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>


      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.8<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>copy-dependencies<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}/lib<span class="nt">&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>

      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.6<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;excludes&gt;</span>
            <span class="nt">&lt;exclude&gt;</span>${project.basedir}/**/*.xml<span class="nt">&lt;/exclude&gt;</span>
            <span class="nt">&lt;exclude&gt;</span>${project.basedir}/**/*.properties<span class="nt">&lt;/exclude&gt;</span>
          <span class="nt">&lt;/excludes&gt;</span>
          <span class="nt">&lt;archive&gt;</span>
            <span class="nt">&lt;manifest&gt;</span>
              <span class="nt">&lt;addClasspath&gt;</span>true<span class="nt">&lt;/addClasspath&gt;</span>
              <span class="nt">&lt;classpathPrefix&gt;</span>lib/<span class="nt">&lt;/classpathPrefix&gt;</span>
              <span class="nt">&lt;mainClass&gt;</span>fxzf_main.FxzfDataMain<span class="nt">&lt;/mainClass&gt;</span>
            <span class="nt">&lt;/manifest&gt;</span>
            <span class="nt">&lt;manifestEntries&gt;</span>
              <span class="nt">&lt;Class-Path&gt;</span>conf/<span class="nt">&lt;/Class-Path&gt;</span>
            <span class="nt">&lt;/manifestEntries&gt;</span>
          <span class="nt">&lt;/archive&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>

      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-assembly-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.4<span class="nt">&lt;/version&gt;</span>
        <span class="c">&lt;!-- The configuration of the plugin --&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="c">&lt;!-- Specifies the configuration file of the assembly plugin --&gt;</span>
          <span class="nt">&lt;archive&gt;</span>
            <span class="nt">&lt;manifest&gt;</span>
              <span class="nt">&lt;mainClass&gt;</span>fxzf_main.FxzfDataMain<span class="nt">&lt;/mainClass&gt;</span>
            <span class="nt">&lt;/manifest&gt;</span>
          <span class="nt">&lt;/archive&gt;</span>
          <span class="nt">&lt;descriptors&gt;</span>
            <span class="nt">&lt;descriptor&gt;</span>package.xml<span class="nt">&lt;/descriptor&gt;</span>
          <span class="nt">&lt;/descriptors&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>make-assembly<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>single<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>


package.xml的文件设置,package.xml和pom.xml在同一个目录中
<span class="nt">&lt;assembly&gt;</span>
    <span class="nt">&lt;id&gt;</span>bin<span class="nt">&lt;/id&gt;</span>
    <span class="c">&lt;!-- 最终打包成一个用于发布的zip文件 --&gt;</span>
    <span class="nt">&lt;formats&gt;</span>
        <span class="nt">&lt;format&gt;</span>zip<span class="nt">&lt;/format&gt;</span>
    <span class="nt">&lt;/formats&gt;</span>
    <span class="c">&lt;!-- Adds dependencies to zip package under lib directory --&gt;</span>
    <span class="nt">&lt;dependencySets&gt;</span>
        <span class="nt">&lt;dependencySet&gt;</span>
            <span class="c">&lt;!--  不使用项目的artifact，第三方jar不要解压，打包进zip文件的lib目录  --&gt;</span>
            <span class="nt">&lt;useProjectArtifact&gt;</span>false<span class="nt">&lt;/useProjectArtifact&gt;</span>
            <span class="nt">&lt;outputDirectory&gt;</span>lib<span class="nt">&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;unpack&gt;</span>false<span class="nt">&lt;/unpack&gt;</span>
        <span class="nt">&lt;/dependencySet&gt;</span>
    <span class="nt">&lt;/dependencySets&gt;</span>
    <span class="nt">&lt;fileSets&gt;</span>
        <span class="c">&lt;!-- 把项目相关的说明文件，打包进zip文件的根目录 --&gt;</span>
        <span class="nt">&lt;fileSet&gt;</span>
            <span class="nt">&lt;directory&gt;</span>${project.basedir}<span class="nt">&lt;/directory&gt;</span>
            <span class="nt">&lt;outputDirectory&gt;</span>/<span class="nt">&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;includes&gt;</span>
                <span class="nt">&lt;include&gt;</span>README*<span class="nt">&lt;/include&gt;</span>
                <span class="nt">&lt;include&gt;</span>LICENSE*<span class="nt">&lt;/include&gt;</span>
                <span class="nt">&lt;include&gt;</span>NOTICE*<span class="nt">&lt;/include&gt;</span>
            <span class="nt">&lt;/includes&gt;</span>
        <span class="nt">&lt;/fileSet&gt;</span>
        <span class="c">&lt;!-- 把项目的配置文件，打包进zip文件的config目录 --&gt;</span>
        <span class="nt">&lt;fileSet&gt;</span>
            <span class="nt">&lt;directory&gt;</span>${project.basedir}/src/main/resource<span class="nt">&lt;/directory&gt;</span>
            <span class="nt">&lt;outputDirectory&gt;</span>conf<span class="nt">&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;includes&gt;</span>
                <span class="nt">&lt;include&gt;</span>*.xml<span class="nt">&lt;/include&gt;</span>
                <span class="nt">&lt;include&gt;</span>*.properties<span class="nt">&lt;/include&gt;</span>
            <span class="nt">&lt;/includes&gt;</span>
        <span class="nt">&lt;/fileSet&gt;</span>
        <span class="c">&lt;!-- 把项目的脚本文件目录（ src/main/scripts ）中的启动脚本文件，打包进zip文件的跟目录 --&gt;</span>
        <span class="nt">&lt;fileSet&gt;</span>
            <span class="nt">&lt;directory&gt;</span>${project.build.scriptSourceDirectory}<span class="nt">&lt;/directory&gt;</span>
            <span class="nt">&lt;outputDirectory&gt;&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;includes&gt;</span>
                <span class="nt">&lt;include&gt;</span>startup.*<span class="nt">&lt;/include&gt;</span>
            <span class="nt">&lt;/includes&gt;</span>
        <span class="nt">&lt;/fileSet&gt;</span>
        <span class="c">&lt;!-- 把项目自己编译出来的jar文件，打包进zip文件的根目录 --&gt;</span>
        <span class="nt">&lt;fileSet&gt;</span>
            <span class="nt">&lt;directory&gt;</span>${project.build.directory}<span class="nt">&lt;/directory&gt;</span>
            <span class="nt">&lt;outputDirectory&gt;&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;includes&gt;</span>
                <span class="nt">&lt;include&gt;</span>*.jar<span class="nt">&lt;/include&gt;</span>
            <span class="nt">&lt;/includes&gt;</span>
        <span class="nt">&lt;/fileSet&gt;</span>
    <span class="nt">&lt;/fileSets&gt;</span>
<span class="nt">&lt;/assembly&gt;</span>
</code></pre></div></div><p>​</p><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="http://localhost:4000" target="_blank">ssgao</a></li><li>本文链接：<a href="http://localhost:4000/2016/03/08/maven%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8%E5%92%8C%E4%BB%8B%E7%BB%8D/" target="_blank">http://localhost:4000/2016/03/08/maven%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8%E5%92%8C%E4%BB%8B%E7%BB%8D/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/vendor/gitalk/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/2016/03/08/maven%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94', clientID: 'd2e1cbbd298958076462', clientSecret: 'b42a4178e5fd4a7cf63189ef4b1453b05c375709', repo: 'blog-comments', owner: 'mzlogin', admin: ['mzlogin'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'http://localhost:4000/assets/search_data.json?v=1636613223', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/js/jquery.toc.js"></script></div></div></section><style> .videoWrapper { position: relative; padding-bottom: 56.333%; height: 0; background: black; } .videoWrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }</style><script> function get_youtube_id(url) { var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/; return (url.match(p)) ? RegExp.$1 : false; } function vimeo_embed(url,el) { var id = false; $.ajax({ url: 'https://vimeo.com/api/oembed.json?url='+url, async: true, success: function(response) { if(response.video_id) { id = response.video_id; if(url.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0; if(url.indexOf('loop=1') !== -1) var loop=1; else var loop=0; var theInnerHTML = '<div class="videoWrapper"><iframe src="https://player.vimeo.com/video/'+id+'/?byline=0&title=0&portrait=0'; if(autoplay==1) theInnerHTML += '&autoplay=1'; if(loop==1) theInnerHTML += '&loop=1'; theInnerHTML += '" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'; el.innerHTML = theInnerHTML; } } }); } function video_embed() { var p = document.getElementsByTagName('p'); for(var i = 0; i < p.length; i++) { //check if this is an external url (that starts with https:// or http:// if (p[i].innerHTML.indexOf("http://") == 0 || p[i].innerHTML.indexOf("https://") == 0) { var youtube_id = get_youtube_id(p[i].innerHTML); if(youtube_id) { if(p[i].innerHTML.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0; if(p[i].innerHTML.indexOf('loop=1') !== -1) var loop=1; else var loop=0; var theInnerHTML = '<div class="videoWrapper"><iframe width="720" height="420" src="https://www.youtube.com/embed/' + youtube_id + '?rel=0&showinfo=0'; if(autoplay==1) theInnerHTML += '&autoplay=1'; if(loop==1) theInnerHTML += '&loop=1&playlist='+youtube_id+'&version=3'; if(p[i].innerHTML.indexOf('start=') !== -1) theInnerHTML += '&start='+p[i].innerHTML.substring(p[i].innerHTML.indexOf('start=')+6); theInnerHTML += '" frameborder="0" allowfullscreen></iframe></div>'; p[i].innerHTML = theInnerHTML; } if(p[i].innerHTML.indexOf('vimeo.com') !== -1) { //ask vimeo for the id and place the embed vimeo_embed(p[i].innerHTML,p[i]); } } } } video_embed(); function mp3_embed() { var p = document.getElementsByTagName('p'); for(var i = 0; i < p.length; i++) { if(p[i].innerHTML.indexOf('.mp3') !== -1) { var str = p[i].innerHTML.split('?'); if(str.length == 1) str[1] = ''; var str1 = str[1]; str1 = str1.replace('&','').replace('&',''); str1 = str1.replace('autoplay=1','').replace('autoplay=0',''); str1 = str1.replace('loop=1','').replace('loop=0',''); str1 = str1.replace('controls=0','').replace('controls=1',''); if (str[0].lastIndexOf('.mp3', str[0].length - 4) === str[0].length - 4 && str1.length == 0) { if(str[1].indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0; if(str[1].indexOf('loop=1') !== -1) var loop=1; else var loop=0; if(str[1].indexOf('controls=0') !== -1) var controls=0; else var controls=1; var newInnerHTML = '<audio'; if(autoplay==1) newInnerHTML += ' autoplay'; if(loop==1) newInnerHTML += ' loop'; if(controls==1) newInnerHTML += ' controls'; newInnerHTML += '><source src="'+str[0]+'" type="audio/mpeg">Your browser does not support the audio element.</audio>'; p[i].innerHTML = newInnerHTML; } } } } mp3_embed(); </script><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2015 <span title="ssgao">ssgao</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/aouoxx/aouoxx.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="http://localhost:4000/" title="首页" target="">首页</a></li><li> <a href="http://localhost:4000/categories/" title="分类" target="">分类</a></li><li> <a href="http://localhost:4000/links/" title="链接" target="">链接</a></li><li> <a href="http://localhost:4000/about/" title="关于" target="">关于</a></li><li><a href="http://localhost:4000/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://cdn.jsdelivr.net/gh/aouoxx/aouoxx.github.io@master/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script><div style="display:none"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-80669434-1', 'auto'); ga('send', 'pageview'); </script></div></body></html>
