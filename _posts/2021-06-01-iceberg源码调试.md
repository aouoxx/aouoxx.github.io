源码编译

```java
避免过多的checker信息
    将文件checkstyle.xml中的
    <module name="Checker">
      //....删除掉
    </module>

修改gradle的maven信息
	buildscript {
          repositories {
            maven{ url 'https://mirrors.huaweicloud.com/repository/maven/' }
            gradlePluginPortal()
          }
          ...
     }
     allprojects {
          group = "org.apache.iceberg"
          version = getProjectVersion()
          repositories {
            maven {
              url 'https://mirrors.huaweicloud.com/repository/maven/'
            }
            mavenCentral()
            mavenLocal()
          }
      }
修改gradle.properties修改编译flink的版本
	systemProp.defaultFlinkVersions=1.13
```

```java
iceberg流读编译

HiveConf hiveConf = new HiveConf();
String icebergNamespace = "icebergNamespace";
String icebergTableName = "icebergTableName";
TableIdentifier identifier = TableIdentifier.of(Namespace.of(icebergNamespace), icebergTableName);
HashMap<String, String> properties = new HashMap<>();
String icebergUri = "icebergUri";
properties.put("uri", icebergUri);
CatalogLoader catalogLoader = CatalogLoader.hive("hive", hiveConf, properties);
TableLoader tableLoader = TableLoader.fromCatalog(catalogLoader, identifier);

StreamExecutionEnvironment environment = StreamExecutionEnvironment.createLocalEnvironment();

DataStream<RowData> rowStream = FlinkSource.forRowData()
    .env(environment)
    .tableLoader(tableLoader)
    .streaming(true)
    .build();
```

```java
org.apache.iceberg.flink.source.FlinkSource.Builder
	构建FlinkSource

public static class FlinkSource.Builder {
    // todo flink stream 环境
    private StreamExecutionEnvironment env;
    // todo iceberg table
    private Table table;
    // todo 用于load iceberg表
    private TableLoader tableLoader;
    // todo iceberg 的schema描述
    private TableSchema projectedSchema;
    // todo 进行icebeg 表读取的配置参数
    private ReadableConfig readableConfig = new Configuration();
    // todo 构建scan 上下文(很关键); 能够进行filter/limit/properties设置/snapshotId指定, 是否区分大小写
    // todo datafile  split/数据回放 等
    private final ScanContext.Builder contextBuilder = ScanContext.builder();
}
```

```java
引用相关 Iceberg 接口和方法：

BaseTransaction.commitCreateTransaction()执行 tableOperation 事务
TableMetadataParser.write()写入元数据 json 文件
```
